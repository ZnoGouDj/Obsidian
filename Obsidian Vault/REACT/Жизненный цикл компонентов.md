# Жизненный цикл компонентов
(lifecycle briefly)

●  **componentWillMount** - перед рендерингом, в основном для настройки компонента
●  **render** - процесс рендеринга
●  **componentDidMount** - уведомляет, про то, что компонент соединен с DOM деревом
●  **componentWillReceiveProps** - уведомляет, про то, что приходят новые входящие свойства в компонент
●  **shouldComponentUpdate** - возвращает true или false и служит для оптимизации. Решает, нужно ли делать ре-рендеринг
●  **componentWillUpdate** - уведомляет, что компонент будет обновлен
●  **componentDidUpdate** - уведомляет, что компонент был обновлен
●  **componentWillUnmount** - используется для удаления слушателей и очистки компонента. Вызывается перед удалением компонента

Компоненты обладают жизненным циклом, это фаза монтирования, обновления и демонтирования. 

У классового компонента это соответственно `componentDidMount, componentDidUpdate, componentWillUnmount`

Это функции, с помощью которых мы можем фазами жизненного цикла управлять. 

Также есть еще функция `shouldComponentUpdate`, которая позволяет нам на фазу обновления при какой-то ситуации например не вызывать рендеринг. То есть если изменилось что-то не особо нам важное, то мы можем рендер пропустить.


## подробнее


В процессе работы компонент проходит через ряд этапов жизненного цикла. На каждом из этапов вызывается определенная функция, в которой мы можем определить какие-либо действия:

1.  `constructor(props)`: конструктор, в котором происходит начальная инициализация компонента
    
2.  `static getDerivedStateFromProps(props, state)`: вызывается непосредственно перед рендерингом компонента. Этот метод не имеет доступа к текущему объекту компонента (то есть обратиться к объкту компоненту через this) и должен возвращать объект для обновления объекта state или значение `null`, если нечего обновлять.
    
3.  `render()`: рендеринг компонента
    
4.  `componentDidMount()`: вызывается после рендеринга компонента. Здесь можно выполнять запросы к удаленным ресурсам
    
5.  `componentWillUnmount()`: вызывается перед удалением компонента из DOM
    

Кроме этих основных этапов или событий жизненного цикла, также имеется еще ряд функций, которые вызываются при обновлении состояния после начального рендеринга компонента, если в компоненте происходят обновления:

1.  `static getDerivedStateFromProps(props, state)`
    
2.  `shouldComponentUpdate(nextProps, nextState)`: вызывается каждый раз при обновлении объекта props или state. В качестве параметра передаются новый объект props и state. Эта функция должна возвращать true (надо делать обновление) или false (игнорировать обновление). По умолчанию возвращается true. Но если функция будет возвращать false, то тем самым мы отключим обновление компонента, а последующие функции не будут срабатывать.
    
3.  `render()`: рендеринг компонента (если shouldComponentUpdate возвращает true)
    
4.  `getSnapshotBeforeUpdate(prevProps, prevState)`: вызывается непосредственно перед компонента. Он позволяет компоненту получить информацию из DOM перед возможным обновлением. Возвращает в качестве значения какой-то отдельный аспект, который передается в качестве третьего параметра в метод `componentDidUpdate()` и может учитываться в componentDidUpdate при обновлении. Если нечего возвращать, то возвращается значение `null`
    
5.  `componentDidUpdate(prevProps, prevState, snapshot)`: вызывается сразу после обновления компонента (если shouldComponentUpdate возвращает true). В качестве параметров передаются старые значения объектов props и state. Третий параметр - значение, которое возвращает метод `getSnapshotBeforeUpdate`