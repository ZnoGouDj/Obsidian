## CORS

**cross-origin resourse sharing** — это механизм безопасности, состоящий из отправки [[HTTP]] заголовков, которые определяют заблокировать или выполнить запрос со сторонних источников. 


<span style="font-weight: bold; color: #FFB514;">Если
<u>website1.com</u> запрашивает картинку с <u>website2.com</u> — это cross-запрос. </span>
CORS предоставляет веб-серверам возможность это настраивать и производить безопасный обмен данными между разными доменами.

В [[express.js]] например, это может быть достигнуто одной строчкой [[middleware]] кода, который говорит серверу включить CORS заголовки в каждый response. 
Ставим библиотеку CORS - npm i cors

```javascript
app.use(cors({ 
	origin: 'https://website2.com'
}))

// либо 

app.use(cors({ 
	origin: '*' // тогда можно ОТКУДА УГОДНО запрашивать
}))

// также можно обозначить разрешенные методы

app.use(cors({ 
	origin: '*',
	methods: ['GET', 'POST'], 
}))

// и отправку куки 

app.use(cors({ 
	origin: '*',
	methods: ['GET', 'POST'], 
	credentials: true
}))
```

Перед отправкой cross-запроса браузер отправляет <span style="font-weight: bold; color: mediumvioletred;">"предварительный" запрос</span>, который в заголовках содержит информацию о текущем запросе.
Сервер получает его, отправляет обратно пустой http-запрос с заголовками сервера.
Браузер получает предварительный ответ, проверяет разрешено ли запрашивать, и отправляет нормальный зарпос если да, если нет - не отправляет. 

Есть например **same-origin security policy**, и он по умолчанию запрещает междоменные запросы. Например, [[XMLHttpRequest]] и [[Fetch]] следуют такой политике, и пока не будут использованы CORS-заголовки - на другой источник они не сработают.

Многие страницы грузят ресурсы типа стилей с разных доменов, которые определяются как CDN - content delivery networks.

%%***URL** (Uniform Resource Locator — унифицированный указатель ресурса) — это адрес ресурса в интернете.*%% далее `адрес`

